<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>LOTTO JS</title>
	<style type="text/css">
		html,body,* { margin: 0; padding: 0; text-align: center;}
		h1 { margin-top: 30px; }
		ul { list-style: none; width: 200px; margin: 30px auto;}
		li { display: inline-block; cursor: pointer; width: 30px; height: 30px; border-radius: 100%; background-color: #eeeeee; line-height: 30px; margin: 2px;}
		li.selected { background-color: #6550ac; }
		input { display:block; width: 200px; height: 30px; margin: 0 auto; background-color: #6550ac; border: none; border-radius: 3px; color: #ffffff}
	</style>
	<script type="text/javascript"
					src="https://unpkg.com/vue@2.5.22/dist/vue.js"></script>
</head>
<body>
	<div class="lottoWrapper">
		<h1>★로또 당첨 기원★</h1>
		<ul>
			<li v-for="lotto in lottos"
					@click="selectLotto(lotto)"
					v-text="lotto.number"
					:class="{'selected': lotto.isSelected}">1</li>
		</ul>
		<input type="button" value="SAVE" @click="showSelectedLottoNumbers()">
	</div>
</body>
<script type="text/javascript">
	'use strict';

	const LOTTO_LIMIT_NUMBER = 45;
	const LOTTO_SELECTED_LIMIT_COUNT = 6;

	const vue = new Vue({
		el: '.lottoWrapper',
		data: {
			lottos: []
		},
		methods : {
			selectLotto: function(lotto) {

					if(lotto.isSelected) {
							lotto.isSelected = !lotto.isSelected;
							return;
					}

					if(this.selectedLottoNumberCount() + 1 > LOTTO_SELECTED_LIMIT_COUNT) {
						return alert('로또 번호는 6개까지만 선택 가능 합니다.');
					}

					lotto.isSelected = !lotto.isSelected;
			},

			selectedLottos: function() {
				return this.lottos.filter((lotto) => {
						return lotto.isSelected;
				});
			},

			selectedLottoNumberCount: function() {
				return this.selectedLottos().length;
			},

			showSelectedLottoNumbers: function() {

				if(this.selectedLottoNumberCount() !== LOTTO_SELECTED_LIMIT_COUNT) {
					return alert('로또번호 6개를 선택 해주세요!!');
				}

				const selectedLottoNumber = this.selectedLottos().map((lotto) => {
					return lotto.number;
				});

				alert('꼭 당첨 되세요 ^^ ' + selectedLottoNumber.join(', '));
			}
		},
		created: function() {
			this.lottos
			 = Array.apply(null, {length: LOTTO_LIMIT_NUMBER})
			 				.map(Number.call, Number)
							.map((number) => {
								return { number:number + 1, isSelected: false }
							});
		}
	})


</script>
</html>
